# BtoC向けサブスク管理アプリ 仕様書（レスポンシブ対応版）

---

## 1. プロダクト概要

### **名称（仮）**
サブスク解約ナビ付き家計アシスタント

### **目的**
ユーザーが契約しているサブスクリプションを一元管理し、
**「解約したいと思った時に、最短ルートで解約できること」** を主目的とする。

### **特徴**
- 各サブスクに「解約動線（解約ページURL / 手順 / 連絡先など）」を紐づけ
- 解約期日が近づくと通知し、「解約ナビ」画面から半自動で解約を進行
- 月額 / 年額の支払い総額やカテゴリ別の可視化で支出を最適化

### **想定プラットフォーム**
- Webアプリ（スマホ / PC 両対応・モバイル優先）

### **技術スタック**
- フロント: Next.js（App Router）
- UI: Tailwind CSS
- バックエンド: Next.js API Routes
- DB: PlanetScale / Supabase / Prisma など任意

---

## 2. ターゲットユーザー

- 20〜40代の個人ユーザー
- 複数サブスクを利用しており整理したい人
- 不要サブスクを即解約したいが、手続きが面倒な層
- 家計簿アプリは面倒だが節約はしたい層

---

## 3. 提供価値 / コンセプト

### **コンセプト**
**「今すぐ解約できるサブスクを、迷わず見つけて、すぐ解約できる」**

### **提供価値**
- 支出の可視化
- 解約手順の探索時間ゼロ
- 自動リマインドによる解約し忘れ防止
- 解約操作の半自動化でストレス削減

---

## 4. 主要ユースケース

### **1. サブスク登録**
- サービス名入力 → プリセット表示 → 選択で解約URL・手順を自動セット
- 料金・請求サイクル・次回請求日を登録

### **2. 解約検討**
- ダッシュボードで高額/不要サブスクを可視化
- 詳細画面から「解約ナビ開始」

### **3. 解約ナビ（半自動解約）**
- 解約ページをワンタップで開く
- ステップチェックリストを確認しながら進行
- 必要情報を自動表示
- 問い合わせ用テンプレをコピーボタンで取得
- 終了後「解約完了」でステータス更新

### **4. 解約し忘れ防止**
- 次回請求日の数日前に通知（メール / Push）
- 通知から解約ナビに直接遷移

---

## 5. 機能要件

### **5.1 アカウント・認証**
- メール＋パスワード登録 / ログイン
- Googleログイン（後続追加可能）
- パスワードリセット

---

### **5.2 サブスク管理（基本）**

#### **1. サブスク一覧表示**
表示内容：
- サービス名
- カテゴリ
- 月額換算金額
- 次回請求日
- ステータス（利用中 / 解約済 / 解約予定）

フィルタ・ソート：
- 金額順
- 請求日順
- ステータス
- カテゴリ

---

#### **2. サブスク追加**
入力項目：
- サービス名
- カテゴリ
- 料金
- 請求周期（月/年）
- 支払い方法
- 契約開始日
- 次回請求日
- メモ（ログイン情報等）

---

#### **3. 編集・削除**
- 詳細画面から編集
- 削除時は確認モーダル表示

---

### **5.3 解約ナビ（最重要）**

#### **1. 解約情報（マスタデータ）**
- 解約URL
- 解約ステップ（JSON）
- 必要情報（ログインID等）
- 注意事項
- 所要時間目安

---

#### **2. 解約ナビ画面構成**
- 「解約ページを開く」ボタン
- ステップチェックリスト
- ユーザー固有情報の強調表示
- テンプレ文章コピー
- 下部に「解約完了」「あとで確認」

---

#### **3. ステータス更新**
- 解約完了 → `解約済み`
- 解約日記録 & 次回請求日の無効化
- 保留 → `解約手続き中`

---

### **5.4 ダッシュボード**

#### **表示内容**
- 今月の総支出
- 年間換算コスト
- カテゴリ別グラフ
- 解約候補（高額 / 使用頻度低）

---

### **5.5 通知・リマインド**
- 次回請求日の n 日前に通知（初期 7 日）
- メール通知 / Push 通知対応

---

### **5.6 ユーザー設定**
- 名前
- タイムゾーン / 通貨
- 通知設定
- CSVエクスポート（後続）

---

## 6. 非機能要件

- 表示速度：1〜2秒以内
- パスワードハッシュ化
- カード番号などの機密情報は保存しない
- 数千ユーザーを想定
- 24時間利用可能な構成

---

## 7. 画面一覧

- ログイン
- 新規登録
- オンボーディング
- ダッシュボード
- サブスク一覧
- サブスク詳細
- 解約ナビ
- サブスク追加/編集
- 通知設定
- アカウント設定

---

## 8. データモデル

### **users**
- id / email / password_hash / name / created_at / updated_at

### **subscription_master**
- id / service_name / category
- default_cancel_url / cancel_steps / required_info_labels
- notes / created_at / updated_at

### **user_subscriptions**
- id / user_id / subscription_master_id
- service_name_override / plan_name / amount / currency
- billing_cycle / payment_method_text
- contract_start_date / next_billing_date
- status / cancel_planned_date / cancelled_at
- login_email / contract_id_text / memo
- created_at / updated_at

### **notifications**
- id / user_id / user_subscription_id
- type / scheduled_at / sent_at / status

---

## 9. API設計概要

- POST /api/auth/register
- POST /api/auth/login
- GET /api/subscriptions
- POST /api/subscriptions
- PUT /api/subscriptions/:id
- DELETE /api/subscriptions/:id
- GET /api/dashboard/summary
- GET /api/subscription-masters?query=

---

## 10. MVP範囲

### **必須**
- 認証
- サブスクCRUD
- ダッシュボード（合計表示）
- 解約ナビ（解約URL＋手順）
- メール通知

### **後続**
- 解約マスタ拡充
- Push通知
- CSVエクスポート
- 使用頻度推計

---

## 11. UI / UX設計（スマホ・PCそれぞれに最適化）

---

### **11.1 レイアウト方針**
- モバイルファースト
- PCでは情報密度を高める
- 主なブレークポイント：
  - **スマホ（0〜639px）**：1カラム
  - **タブレット（640〜1023px）**：2カラム一部使用
  - **PC（1024px〜）**：2〜3カラム

---

### **11.2 共通コンポーネント**

#### **ヘッダー**
- **スマホ**：ロゴ＋ハンバーガーメニュー
- **PC**：ロゴ＋ナビリンク

#### **ナビゲーション**
- **スマホ**：下部ボトムナビ（ホーム・一覧・通知・設定）
- **PC**：左サイドバー

#### **カードUI**
- **スマホ**：1カラムカード
- **PC**：2〜3列のグリッド

---

### **11.3 画面別レイアウト**

#### **1. ログイン / 新規登録**

**スマホ**
- 縦スクロールの1カラム
- キーボード表示時もボタンが見える設計

**PC**
- 中央にカード
- 左側に説明やロゴを配置可能

#### **2. ダッシュボード**

**スマホ**
- 合計支出 → グラフ → 解約候補 の順で縦スクロール

**PC**
- 左：合計支出 & グラフ
- 右：解約候補・今週更新サブスク

#### **3. サブスク一覧**

**スマホ**
- カード1列表示
- フィルタはドロップダウン

**PC**
- テーブル or カードグリッド
- 画面右上にフィルタツールバー

#### **4. サブスク詳細**

**スマホ**
- 大きめの解約ナビボタンを上部に
- 情報はアコーディオンで折り畳み

**PC**
- 左：基本情報
- 右：解約ナビ概要

#### **5. 解約ナビ**

**スマホ**
- 縦チェックリスト型
- 下部固定の「完了」ボタン

**PC**
- 左：ステップ
- 右：必要情報・注意事項
- ボタンは画面下にまとまる

#### **6. 設定画面**

**スマホ**
- リスト形式

**PC**
- 左メニュー＋右フォーム

---

### **11.4 レスポンシブの基本要件**

- ボタン高さ：**スマホは44px以上**
- スマホは情報少なめ、PCは情報多め
- グラフはスマホで横スクロール可
- モーダルは
  - スマホ：全画面
  - PC：中央小窓
